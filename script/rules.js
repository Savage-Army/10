module.exports.config = {
	name: "rules",
	version: "1.0.2",
	hasPermssion: 0,
	credits: "JRT",
	description: "rules Menu",
	commandCategory: "CÃ´ng cá»¥",
	usages: "[TÃªn module]",
	cooldowns: 5,
	envConfig: {
		autoUnsend: true,
		delayUnsend: 1000
	}
};

module.exports.languages = {
	"en": {
		"moduleInfo": " ",
		"helpList": 'âš ï¸rules of this groupâš ï¸\n\nðŸŒ€ðŸ”¸ Category: âš ï¸rulesâš ï¸\n\n1. à¦¸à¦¬à¦¾à¦‡à¦•à§‡ à¦¸à¦®à§à¦®à¦¾à¦¨ à¦¦à¦¿à§Ÿà§‡ à¦•à¦¥à¦¾ à¦¬à¦²à¦¤à§‡ à¦¹à¦¬à§‡à§·\n2. à¦•à§‹à¦¨ à¦—à¦¾à¦²à¦¿ à¦¦à§‡à¦“à§Ÿà¦¾ à¦¯à¦¾à¦¬à§‡ à¦¨à¦¾, à¦…à¦¤à§€à¦¬ à¦œà¦°à§à¦°à¦¿ à¦¹à¦²à§‡ ** à¦šà¦¿à¦¹à§à¦¨ à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à¦¤à§‡ à¦¹à¦¬à§‡, à¦¯à¦¾à¦¤à§‡ à¦—à¦¾à¦²à¦¿ à¦¬à§à¦à¦¾ à¦¨à¦¾ à¦¯à¦¾à§Ÿà¥¤\n3. à¦§à¦°à§à¦®à§€à§Ÿ à¦…à¦¨à§à¦­à§‚à¦¤à¦¿à¦¤à§‡ à¦†à¦˜à¦¾à¦¤ à¦¹à¦¾à¦¨à§‡ à¦à¦®à¦¨ à¦•à¦¥à¦¾ à¦¬à¦²à¦¾ à¦¯à¦¾à¦¬à§‡ à¦¨à¦¾à¥¤\n4. à¦°à¦¾à¦œà¦¨à§ˆà¦¤à¦¿à¦• à¦†à¦²à¦¾à¦ª à¦¨à¦¿à¦·à¦¿à¦¦à§à¦§à¥¤ only BAL is real\n5. à¦•à¦¾à¦‰à¦•à§‡ à¦‡à¦¨à¦¬à¦•à§à¦¸à§‡ à¦¡à¦¾à¦•à¦¾ à¦¯à¦¾à¦¬à§‡ à¦¨à¦¾ (à¦®à§‡à§Ÿà§‡à¦¦à§‡à¦°)\n6. à¦—à§à¦°à§à¦ªà§‡ à¦•à§‹à¦¨ à¦²à¦¿à¦‚à¦• à¦¦à§‡à¦“à§Ÿà¦¾ à¦¯à¦¾à¦¬à§‡ à¦¨à¦¾, à¦¦à¦¿à¦²à§‡ à¦“à§Ÿà¦¾à¦°à§à¦¨à¦¿à¦‚à¥¤ à¦†à¦° à¦•à§‹à¦¨ à¦®à§‡à¦¸à§‡à¦žà§à¦œà¦¾à¦° à¦—à§à¦°à§à¦ªà§‡à¦° à¦²à¦¿à¦‚à¦• à¦¦à¦¿à¦²à§‡ à¦•à¦¿à¦•, à§¨à§Ÿ à¦¬à¦¾à¦° à¦¬à§à¦¯à¦¾à¦¨à¥¤\n7. 18+ video à¦¦à§‡à¦“à§Ÿà¦¾ à¦¯à¦¾à¦¬à§‡ à¦¨à¦¾à¥¤\n8. à¦—à§à¦°à§à¦ªà§‡à¦° à¦¨à¦¾à¦® à¦•à§‹à¦¨à¦­à¦¾à¦¬à§‡à¦‡ à¦à¦¡à¦®à¦¿à¦¨ à¦¬à§à¦¯à¦¾à¦¤à¦¿à¦¤ à¦…à¦¨à§à¦¯ à¦•à§‡à¦‰ à¦šà§‡à¦žà§à¦œ à¦•à¦°à¦¤à§‡ à¦ªà¦¾à¦°à¦¬à§‡ à¦¨à¦¾à¥¤\n9. à¦…à¦¶à§à¦²à§€à¦²à¦¤à¦¾ à¦¬à§‹à¦à¦¾à§Ÿ à¦à¦®à¦¨ à¦•à§‹à¦¨ à¦¶à¦¬à§à¦¦à§‡à¦° à¦¯à§‡à¦•à§‹à¦¨à§‹ à¦­à¦¾à¦·à¦¾à§Ÿ à¦¶à¦°à§à¦Ÿ à¦«à¦°à§à¦® à¦“ à¦¬à§à¦¯à¦¾à¦¬à¦¹à¦¾à¦° à¦•à¦°à¦¾ à¦¯à¦¾à¦¬à§‡ à¦¨à¦¾\
n\nðŸŒ€ðŸ”¸Category Repot AdminðŸ”¹\n\nâœ… For More Contact With Bot Developer :        ðŸ”¸\n\n',
		"user": "User",
        "adminGroup": "Admin group",
        "adminBot": "Admin bot"
	}
}

module.exports.handleEvent = function ({ api, event, getText }) {
	const { commands } = global.client;
	const { threadID, messageID, body } = event;

	if (!body || typeof body == "undefined" || body.indexOf("rules") != 0) return;
	const splitBody = body.slice(body.indexOf("rules")).trim().split(/\s+/);
	if (splitBody.length == 1 || !commands.has(splitBody[1].toLowerCase())) return;
	const threadSetting = global.data.threadData.get(parseInt(threadID)) || {};
	const command = commands.get(splitBody[1].toLowerCase());
	const prefix = (threadSetting.hasOwnProperty("PREFIX")) ? threadSetting.PREFIX : global.config.PREFIX;
	return api.sendMessage(getText("moduleInfo", command.config.name, command.config.description, `${prefix}${command.config.name} ${(command.config.usages) ? command.config.usages : ""}`, command.config.commandCategory, command.config.cooldowns, ((command.config.hasPermssion == 0) ? getText("user") : (command.config.hasPermssion == 1) ? getText("adminGroup") : getText("adminBot")), command.config.credits), threadID, messageID);
}

module.exports.run = function({ api, event, args, getText }) {
	const { commands } = global.client;
	const { threadID, messageID } = event;
	const command = commands.get((args[0] || "").toLowerCase());
	const threadSetting = global.data.threadData.get(parseInt(threadID)) || {};
	const { autoUnsend, delayUnsend } = global.configModule[this.config.name];
	const prefix = (threadSetting.hasOwnProperty("PREFIX")) ? threadSetting.PREFIX : global.config.PREFIX;

	if (!command) {
		const command = commands.values();
		var group = [], msg = "";
		for (const commandConfig of command) {
			if (!group.some(item => item.group.toLowerCase() == commandConfig.config.commandCategory.toLowerCase())) group.push({ group: commandConfig.config.commandCategory.toLowerCase(), cmds: [commandConfig.config.name] });
			else group.find(item => item.group.toLowerCase() == commandConfig.config.commandCategory.toLowerCase()).cmds.push(commandConfig.config.name);
		}
		
		return api.sendMessage(msg + getText("helpList", commands.size, prefix), threadID, async (error, info) =>{
			if (autoUnsend) {
				await new Promise(resolve => setTimeout(resolve, delayUnsend * 1000));
				return api.unsendMessage(info.messageID);
			} else return;
		});

	}

	return api.sendMessage(getText("moduleInfo", command.config.name, command.config.description, `${prefix}${command.config.name} ${(command.config.usages) ? command.config.usages : ""}`, command.config.commandCategory, command.config.cooldowns, ((command.config.hasPermssion == 0) ? getText("user") : (command.config.hasPermssion == 1) ? getText("adminGroup") : getText("adminBot")), command.config.credits), threadID, messageID);
    }